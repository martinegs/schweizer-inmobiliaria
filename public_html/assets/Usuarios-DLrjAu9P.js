import{_ as V,r as n,b as $,I as M,c as i,e as a,j as k,t as l,F as q,g as A,k as w,l as _,v as f,q as B,C as I,o as d,n as L,J as U,K as S,L as j}from"./index-Dye-iBda.js";const F={class:"usuarios-container"},G={class:"page-header"},T={key:0,class:"loading"},z={key:1,class:"error-message"},J={key:2,class:"usuarios-list"},K={class:"usuarios-table"},R={class:"actions"},H=["onClick"],O=["onClick","title"],P=["onClick"],Q={class:"modal-content"},W={class:"modal-header"},X={class:"form-group"},Y=["disabled"],Z={class:"form-group"},aa={class:"form-group"},ea=["required"],ta={class:"form-group"},sa={class:"checkbox-label"},oa={key:0,class:"error-message"},la={class:"modal-actions"},ra=["disabled"],na={__name:"Usuarios",setup(ia){const g=n([]),y=n(!0),c=n(""),v=n(!1),r=n(null),m=n(!1),u=n(""),o=n({email:"",nombre:"",password:"",activo:!0});$(()=>{b()});const b=async()=>{try{y.value=!0;const t=await M();g.value=t.data,c.value=""}catch(t){c.value="Error al cargar usuarios",console.error(t)}finally{y.value=!1}},C=t=>{r.value=t,o.value={email:t.email,nombre:t.nombre,password:"",activo:t.activo},v.value=!0},p=()=>{v.value=!1,r.value=null,o.value={email:"",nombre:"",password:"",activo:!0},u.value=""},E=async()=>{try{m.value=!0,u.value="",r.value?await U(r.value.id,o.value):await j(o.value),await b(),p()}catch(t){u.value=t.response?.data?.message||"Error al guardar usuario"}finally{m.value=!1}},x=async t=>{if(confirm(`¿Deseas ${t.activo?"desactivar":"activar"} este usuario?`))try{await U(t.id,{activo:!t.activo}),await b()}catch{alert("Error al cambiar estado del usuario")}},D=async t=>{if(confirm(`¿Estás seguro de eliminar al usuario ${t.email}?`))try{await S(t.id),await b()}catch{alert("Error al eliminar usuario")}},N=t=>new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",day:"numeric"});return(t,e)=>(d(),i("div",F,[a("div",G,[e[5]||(e[5]=a("h2",null,"Usuarios",-1)),a("button",{onClick:e[0]||(e[0]=s=>v.value=!0),class:"btn-primary"}," + Nuevo Usuario ")]),y.value?(d(),i("div",T,"Cargando...")):c.value?(d(),i("div",z,l(c.value),1)):(d(),i("div",J,[a("table",K,[e[6]||(e[6]=a("thead",null,[a("tr",null,[a("th",null,"Email"),a("th",null,"Nombre"),a("th",null,"Estado"),a("th",null,"Creado"),a("th",null,"Acciones")])],-1)),a("tbody",null,[(d(!0),i(q,null,A(g.value,s=>(d(),i("tr",{key:s.id},[a("td",null,l(s.email),1),a("td",null,l(s.nombre),1),a("td",null,[a("span",{class:L(["badge",s.activo?"badge-active":"badge-inactive"])},l(s.activo?"Activo":"Inactivo"),3)]),a("td",null,l(N(s.created_at)),1),a("td",null,[a("div",R,[a("button",{onClick:h=>C(s),class:"btn-icon btn-edit",title:"Editar"}," Editar ",8,H),a("button",{onClick:h=>x(s),class:"btn-icon btn-toggle",title:s.activo?"Desactivar":"Activar"},l(s.activo?"Desactivar":"Activar"),9,O),a("button",{onClick:h=>D(s),class:"btn-icon btn-danger",title:"Eliminar"}," Eliminar ",8,P)])])]))),128))])])])),v.value?(d(),i("div",{key:3,class:"modal-overlay",onClick:w(p,["self"])},[a("div",Q,[a("div",W,[a("h3",null,l(r.value?"Editar Usuario":"Nuevo Usuario"),1),a("button",{onClick:p,class:"btn-close"},"×")]),a("form",{onSubmit:w(E,["prevent"]),class:"modal-form"},[a("div",X,[e[7]||(e[7]=a("label",null,"Email *",-1)),_(a("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=s=>o.value.email=s),required:"",disabled:r.value},null,8,Y),[[f,o.value.email]])]),a("div",Z,[e[8]||(e[8]=a("label",null,"Nombre *",-1)),_(a("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>o.value.nombre=s),required:""},null,512),[[f,o.value.nombre]])]),a("div",aa,[a("label",null,"Contraseña "+l(r.value?"(dejar vacío para no cambiar)":"*"),1),_(a("input",{type:"password","onUpdate:modelValue":e[3]||(e[3]=s=>o.value.password=s),required:!r.value,autocomplete:"new-password"},null,8,ea),[[f,o.value.password]])]),a("div",ta,[a("label",sa,[_(a("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>o.value.activo=s)},null,512),[[I,o.value.activo]]),e[9]||(e[9]=B(" Usuario activo ",-1))])]),u.value?(d(),i("div",oa,l(u.value),1)):k("",!0),a("div",la,[a("button",{type:"button",onClick:p,class:"btn-secondary"}," Cancelar "),a("button",{type:"submit",class:"btn-primary",disabled:m.value},l(m.value?"Guardando...":"Guardar"),9,ra)])],32)])])):k("",!0)]))}},ua=V(na,[["__scopeId","data-v-a791c2ef"]]);export{ua as default};
