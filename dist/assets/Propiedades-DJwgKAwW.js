import{_ as P,r as u,i as $,b as q,c as l,e,j as v,f as b,w as f,p as w,n as m,t as n,F as N,g as x,k as V,h as A,A as B,o as i,q as p}from"./index-Db5t-4EZ.js";const F={class:"admin-propiedades"},I={class:"page-header"},S={class:"filters"},z={key:0,class:"loading"},D={key:1,class:"empty"},L={key:2,class:"propiedades-grid"},M={class:"card-image"},T=["src","alt"],j={key:1,class:"no-image"},G={class:"badges"},U={key:0,class:"badge badge-destacada"},H={key:1,class:"badge badge-inactive"},J={class:"card-content"},K={class:"ubicacion"},O={class:"features"},Q={class:"precio"},R={key:0},W={class:"card-actions"},X=["onClick"],Y={__name:"Propiedades",setup(Z){const d=u([]),g=u(!0),o=u("todas"),r=u(null),c=$(()=>o.value==="todas"?d.value:d.value.filter(t=>t.tipo===o.value)),y=t=>`https://schweizerinmobiliaria.com/api/public/uploads/${t}`,h=async()=>{g.value=!0;try{const t=await A();d.value=t.data.data||[]}catch(t){console.error("Error al cargar propiedades:",t),alert("Error al cargar las propiedades")}finally{g.value=!1}},C=t=>{r.value=t},k=()=>{r.value=null},E=async()=>{try{await B(r.value.id),d.value=d.value.filter(t=>t.id!==r.value.id),r.value=null,alert("Propiedad eliminada exitosamente")}catch(t){console.error("Error al eliminar:",t),alert("Error al eliminar la propiedad")}};return q(()=>{h()}),(t,s)=>{const _=w("router-link");return i(),l("div",F,[e("div",I,[s[5]||(s[5]=e("h2",null,"Gestión de Propiedades",-1)),b(_,{to:"/admin/propiedades/nueva",class:"btn-primary"},{default:f(()=>[...s[4]||(s[4]=[p(" + Nueva Propiedad ",-1)])]),_:1})]),e("div",S,[e("button",{onClick:s[0]||(s[0]=a=>o.value="todas"),class:m(["filter-btn",{active:o.value==="todas"}])}," Todas ("+n(d.value.length)+") ",3),e("button",{onClick:s[1]||(s[1]=a=>o.value="venta"),class:m(["filter-btn",{active:o.value==="venta"}])}," En Venta ("+n(c.value.filter(a=>a.tipo==="venta").length)+") ",3),e("button",{onClick:s[2]||(s[2]=a=>o.value="alquiler"),class:m(["filter-btn",{active:o.value==="alquiler"}])}," En Alquiler ("+n(c.value.filter(a=>a.tipo==="alquiler").length)+") ",3)]),g.value?(i(),l("div",z," Cargando propiedades... ")):c.value.length===0?(i(),l("div",D,[s[7]||(s[7]=e("p",null,"No hay propiedades aún.",-1)),b(_,{to:"/admin/propiedades/nueva",class:"btn-primary"},{default:f(()=>[...s[6]||(s[6]=[p(" Crear Primera Propiedad ",-1)])]),_:1})])):(i(),l("div",L,[(i(!0),l(N,null,x(c.value,a=>(i(),l("div",{key:a.id,class:"propiedad-card"},[e("div",M,[a.imagenes&&a.imagenes.length>0?(i(),l("img",{key:0,src:y(a.imagenes[0]),alt:a.titulo},null,8,T)):(i(),l("div",j,"Sin imagen")),e("div",G,[e("span",{class:m(["badge",`badge-${a.tipo}`])},n(a.tipo==="venta"?"Venta":"Alquiler"),3),a.destacada?(i(),l("span",U," ⭐ Destacada ")):v("",!0),a.activa?v("",!0):(i(),l("span",H," Inactiva "))])]),e("div",J,[e("h3",null,n(a.titulo),1),e("p",K,n(a.ubicacion),1),e("div",O,[e("span",null,n(a.dormitorios)+" dorm",1),e("span",null,n(a.banos)+" baños",1),e("span",null,n(a.superficie)+"m²",1)]),e("div",Q,[p(" $"+n(Number(a.precio).toLocaleString())+" ",1),a.tipo==="alquiler"?(i(),l("span",R,"/mes")):v("",!0)]),e("div",W,[b(_,{to:`/admin/propiedades/${a.id}/editar`,class:"btn-edit"},{default:f(()=>[...s[8]||(s[8]=[p(" Editar ",-1)])]),_:1},8,["to"]),e("button",{onClick:ee=>C(a),class:"btn-delete"}," Eliminar ",8,X)])])]))),128))])),r.value?(i(),l("div",{key:3,class:"modal-overlay",onClick:k},[e("div",{class:"modal",onClick:s[3]||(s[3]=V(()=>{},["stop"]))},[s[9]||(s[9]=e("h3",null,"¿Eliminar propiedad?",-1)),e("p",null,'¿Estás seguro de que deseas eliminar "'+n(r.value.titulo)+'"?',1),s[10]||(s[10]=e("p",{class:"warning"},"Esta acción no se puede deshacer.",-1)),e("div",{class:"modal-actions"},[e("button",{onClick:k,class:"btn-cancel"}," Cancelar "),e("button",{onClick:E,class:"btn-delete"}," Eliminar ")])])])):v("",!0)])}}},se=P(Y,[["__scopeId","data-v-1a2812e9"]]);export{se as default};
